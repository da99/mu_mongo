"<?xml version=\"1.0\" encoding=\"UTF-8\"?><rss xmlns:atom=\"http://www.w3.org/2005/Atom\" version=\"2.0\"><channel><atom:link href=\"#{CGI.escapeHTML(ctx[:site_url].to_s)}rss.xml\" rel=\"self\" type=\"application/rss+xml\" /><title>#{CGI.escapeHTML(ctx[:site_title].to_s)}</title><description>#{CGI.escapeHTML(ctx[:site_tag_line].to_s)}</description><link>#{CGI.escapeHTML(ctx[:site_url].to_s)}</link>#{      if v = ctx[:posts]
        if v == true
          "<item><title>#{CGI.escapeHTML(ctx[:title].to_s)}</title><link>#{CGI.escapeHTML(ctx[:url].to_s)}</link><description>#{CGI.escapeHTML(ctx[:body].to_s)}</description><pubDate>#{CGI.escapeHTML(ctx[:published_at_rfc822].to_s)}</pubDate><guid>#{CGI.escapeHTML(ctx[:url].to_s)}</guid></item>"
        elsif v.is_a?(Proc)
          v.call("<item><title>#{CGI.escapeHTML(ctx[:title].to_s)}</title><link>#{CGI.escapeHTML(ctx[:url].to_s)}</link><description>#{CGI.escapeHTML(ctx[:body].to_s)}</description><pubDate>#{CGI.escapeHTML(ctx[:published_at_rfc822].to_s)}</pubDate><guid>#{CGI.escapeHTML(ctx[:url].to_s)}</guid></item>")
        else
          v = [v] unless v.is_a?(Array) # shortcut when passed non-array
          v.map { |h| ctx.push(h); r = "<item><title>#{CGI.escapeHTML(ctx[:title].to_s)}</title><link>#{CGI.escapeHTML(ctx[:url].to_s)}</link><description>#{CGI.escapeHTML(ctx[:body].to_s)}</description><pubDate>#{CGI.escapeHTML(ctx[:published_at_rfc822].to_s)}</pubDate><guid>#{CGI.escapeHTML(ctx[:url].to_s)}</guid></item>"; ctx.pop; r }.join
        end
      end
}</channel></rss>"